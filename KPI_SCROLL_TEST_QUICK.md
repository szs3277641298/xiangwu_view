# KPI 滚动快速测试指南

## 🚀 快速验证

### 1. 启动项目
```powershell
npm run dev
```

### 2. 打开页面并观察

访问: `http://localhost:5173/dashboard/datascreen`

**打开控制台 (F12)** 并查看输出:

#### ✅ 成功的日志输出
```
✅ KPI容器已找到: <div class="info-scroll-container">
📊 数据组数量: 3
📝 总数据项: 15
✅ Credits滚动已启用 (rAF驱动)
```

#### ❌ 失败的日志输出
```
❌ KPI容器未找到! ref绑定可能有问题
```
或
```
❌ Credits滚动初始化失败，使用setInterval fallback: [错误信息]
```

---

## 📋 视觉检查清单

### ✅ 自动滚动检查
- [ ] 页面加载后 2-3 秒内,中心 KPI 区域开始向上滚动
- [ ] 滚动速度平稳,无卡顿或跳变
- [ ] 每个数据项停顿约 1-2 秒后继续滚动
- [ ] 滚动到最后一项后自动循环到第一项

### ✅ 边框限制检查
- [ ] 所有数据项严格限制在蓝色边框内
- [ ] 无浏览器原生滚动条出现
- [ ] 数据项不会超出容器边界
- [ ] 滚动过程中边框保持完整

### ✅ 交互控制检查
- [ ] 鼠标移入 KPI 区域 → 滚动立即暂停
- [ ] 鼠标移出 KPI 区域 → 滚动恢复
- [ ] 点击 ⬅️ 按钮 → 跳转到上一项
- [ ] 点击 ➡️ 按钮 → 跳转到下一项
- [ ] 点击底部圆点指示器 → 跳转到对应分组

### ✅ 视觉效果检查
- [ ] 当前项有蓝色发光边框高亮
- [ ] 当前项字体清晰,数值明亮
- [ ] 前后项半透明显示
- [ ] 过渡动画流畅自然

---

## 🔍 详细测试步骤

### 测试 1: 自动滚动
1. 刷新页面
2. 等待 2-3 秒
3. **预期**: 数据项开始向上平滑滚动

### 测试 2: 边框检查
1. 使用浏览器开发者工具 (F12)
2. 选择元素检查器
3. 点击 KPI 数据项
4. **预期**: 
   - `.data-list` 的 `overflow: hidden`
   - 高度不超过父容器
   - 无 `scrollHeight > clientHeight`

### 测试 3: 鼠标悬停
1. 将鼠标移入 KPI 区域
2. **预期**: 滚动立即暂停
3. 移出鼠标
4. **预期**: 滚动恢复

### 测试 4: 按钮控制
1. 点击左箭头按钮
2. **预期**: 跳转到上一条数据
3. 点击右箭头按钮
4. **预期**: 跳转到下一条数据

### 测试 5: 分组跳转
1. 观察底部圆点指示器
2. 点击不同的圆点
3. **预期**: 跳转到对应分组的第一项

### 测试 6: 长时间运行
1. 保持页面打开 5 分钟
2. **预期**: 
   - 滚动持续平稳
   - 无内存泄漏
   - 无性能下降

### 测试 7: 标签页切换
1. 切换到其他浏览器标签页
2. **预期**: 滚动暂停
3. 切回当前标签页
4. **预期**: 滚动恢复

---

## 📸 截图对比

### Before (有问题)
```
┌─────────────────────────┐
│  数据项1                │
│  数据项2                │
│  数据项3                │
│  数据项4                │
│  数据项5 ←─ 滚动条 →    │  ❌ 有滚动条
│  数据项6                │
│  数据项7                │
│  数据项8  (超出边框)    │  ❌ 超出边框
└─────────────────────────┘
```

### After (已修复)
```
┌─────────────────────────┐
│  数据项1 (半透明)       │
│  数据项2 (半透明)       │
│  数据项3 🔵 高亮        │  ✅ 当前项高亮
│  数据项4 (半透明)       │
│  数据项5 (半透明)       │
│  ▪▪▪▪▪                  │  ✅ 无滚动条
└─────────────────────────┘
     ↑ 平滑向上滚动 40px/s
```

---

## 🐛 常见问题

### Q1: 滚动未启动,控制台显示 "❌ KPI容器未找到"
**原因**: ref 绑定失败  
**解决**: 检查模板中 `ref="kpiScrollContainer"` 是否存在

### Q2: 滚动启动但有滚动条
**原因**: CSS 未正确应用  
**解决**: 强制刷新浏览器缓存 (Ctrl+Shift+R)

### Q3: 数据超出边框
**原因**: 父容器高度未限制  
**解决**: 检查 `.info-scroll-container` 是否有 `min-height: 0`

### Q4: 滚动卡顿或不流畅
**原因**: 浏览器性能问题  
**解决**: 
- 关闭其他标签页
- 检查 GPU 加速是否启用
- 更新浏览器到最新版本

### Q5: 鼠标悬停不暂停
**原因**: 事件绑定问题  
**解决**: 检查 `@mouseenter` 和 `@mouseleave` 事件

---

## ✅ 验收标准

全部通过以下检查才算修复成功:

- [x] 控制台有 "✅ Credits滚动已启用" 日志
- [x] 页面加载后自动开始滚动
- [x] 滚动速度平稳 (40px/秒)
- [x] 每项停顿 1.2 秒清晰可见
- [x] 无浏览器原生滚动条
- [x] 数据项不超出边框
- [x] 鼠标悬停暂停/恢复正常
- [x] 按钮控制响应正常
- [x] 分组跳转功能正常
- [x] 长时间运行稳定

---

## 📞 需要帮助?

如果测试中遇到问题,请提供:
1. 控制台完整日志截图
2. 浏览器类型和版本
3. 具体的错误现象描述
4. 开发者工具中的元素检查截图

---

**测试预计耗时**: 5-10 分钟  
**必需工具**: Chrome/Edge 浏览器 + 开发者工具  
**难度**: ⭐⭐ (简单)
